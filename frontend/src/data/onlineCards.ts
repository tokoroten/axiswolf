import seedrandom from 'seedrandom';

// オンラインプレイ用のカードデータ
export interface Card {
  id: string;
  name: string;
  category: 'food' | 'item' | 'place' | 'animal' | 'plant' | 'entertainment' | 'sport' | 'weather' | 'vehicle';
  imageUrl?: string;
}

// カード名のデータ（簡潔な配列形式）
const cardData = {
  food: [
    '寿司', 'ラーメン', 'カレー', 'ピザ', 'ハンバーガー', '天ぷら', 'うどん', 'そば', 'おにぎり', 'たこ焼き',
    '焼き鳥', '餃子', 'チャーハン', 'パスタ', 'サラダ', 'ステーキ', '焼肉', 'しゃぶしゃぶ', 'お好み焼き', '牛丼',
    '親子丼', 'カツ丼', 'オムライス', 'カレーパン', 'メロンパン', 'クロワッサン', 'ドーナツ', 'ケーキ', 'プリン', 'アイスクリーム',
    'チョコレート', 'ポテトチップス', 'せんべい', '団子', '大福', 'たい焼き', 'わたあめ', 'かき氷', 'コーヒー', '紅茶',
    '緑茶', 'りんご', 'みかん', 'バナナ', 'ぶどう', 'いちご', 'もも', 'なし', 'メロン', 'スイカ',
    'パイナップル', 'マンゴー', 'キウイ', 'グレープフルーツ', 'レモン', 'オレンジ', 'さくらんぼ', 'ブルーベリー', 'ラズベリー', '柿',
    '栗', 'アボカド', 'ライチ', 'ドラゴンフルーツ', 'ココナッツ', 'びわ', 'ゆず', 'すだち', 'かぼす', 'いちじく', 'ざくろ',
    // 野菜・食材（plantから移動）
    'キャベツ', 'レタス', '白菜', 'ほうれん草', '小松菜', 'ネギ', '玉ねぎ', 'にんじん', '大根', 'じゃがいも',
    'さつまいも', 'トマト', 'きゅうり', 'なす', 'ピーマン', 'パプリカ', 'ブロッコリー', 'カリフラワー', 'アスパラガス', 'セロリ',
    'ごぼう', 'れんこん', 'かぼちゃ', 'とうもろこし', '枝豆', 'オクラ', 'にんにく', 'しょうが', 'みょうが', '大葉（しそ）',
    'パセリ', 'バジル', 'もやし', 'かいわれ大根', '豆苗', 'ズッキーニ', 'ゴーヤ', 'チンゲン菜', 'ニラ', '春菊',
    'しいたけ', 'えのき', 'しめじ', 'まいたけ', 'エリンギ'
  ],

  item: [
    'スマートフォン', 'パソコン', 'テレビ', '冷蔵庫', '洗濯機', 'エアコン', '掃除機', '電子レンジ', '炊飯器', 'ドライヤー',
    '歯ブラシ', 'シャンプー', 'タオル', 'ティッシュ', 'トイレットペーパー', 'マスク', 'メガネ', '腕時計', '財布', 'カバン',
    '傘', '靴', '服', '帽子', '手袋', 'マフラー', 'ペン', 'ノート', 'はさみ', 'のり',
    '定規', '消しゴム', '鉛筆', '本', '雑誌', '新聞', 'カメラ',
    'ダイヤモンド', '羽毛', '氷', '炎', '鉄', '綿', '岩', '水', 'ガラス', 'ゴム',
    '木材', 'プラスチック', 'スポンジ', '針', '刀', '盾', '槍', '弓', 'ハンマー', '釘',
    '筋肉', '骨', '心臓', '脳', '目', '耳', '手', '足',
    '砂時計', 'コンパス', '地図', '羅針盤', '望遠鏡', '顕微鏡', '時計', 'カレンダー', '電話', 'ラジオ', 'スピーカー',
    '枕', '布団', 'ベッド', 'ソファ', '椅子', 'テーブル', '机', 'タンス', '本棚', '食器棚',
    'クローゼット', 'カーテン', 'じゅうたん', 'マット', 'クッション', '毛布', 'シーツ', '掛け布団', '敷布団', '座布団',
    '箸', 'スプーン', 'フォーク', 'ナイフ', '皿', '茶碗', 'コップ', 'マグカップ', '湯呑み', 'グラス',
    '鍋', 'フライパン', 'やかん', '包丁', 'まな板', 'おたま', 'フライ返し', '泡立て器', 'ボウル', 'ざる',
    '計量カップ', '計量スプーン', 'ラップ', 'アルミホイル', 'キッチンペーパー', 'スポンジ', '洗剤', '石鹸', 'ハンドソープ', 'ボディソープ',
    'リンス', 'トリートメント', '歯磨き粉', 'うがい薬', 'バスタオル', 'フェイスタオル', 'ハンドタオル', 'バスマット', 'トイレマット', 'トイレブラシ',
    'モップ', 'ほうき', 'ちりとり', 'バケツ', '雑巾', 'ゴミ箱', 'ゴミ袋', 'ビニール袋', '紙袋', 'エコバッグ',
    '保冷バッグ', 'クーラーボックス', '水筒', 'タンブラー', '弁当箱', 'おはし箱', 'ランチョンマット', 'エプロン', '鏡', '手鏡',
    'くし', 'ブラシ', 'かみそり', 'シェーバー', '爪切り', '爪やすり', '耳かき', '綿棒', 'ピンセット', '体温計',
    '血圧計', '体重計', '薬', '絆創膏', '包帯', 'ガーゼ', '消毒液', '目薬', 'コンタクトレンズ', 'サングラス',
    '老眼鏡', 'イヤホン', 'ヘッドホン', '充電器', 'バッテリー', '電池', '延長コード', 'コンセント', 'スイッチ', 'リモコン',
    'エアコンフィルター', '加湿器', '除湿機', '空気清浄機', '扇風機', 'ヒーター', 'こたつ', '電気毛布', 'ホットカーペット', '湯たんぽ',
    'カイロ', 'うちわ', '扇子', '蚊取り線香', '虫除けスプレー', '殺虫剤', '防虫剤', '芳香剤', '消臭剤', 'アロマオイル',
    'お香', 'ろうそく', 'ライター', 'マッチ', '灰皿', '栓抜き', '缶切り', 'ワインオープナー', 'アイスピック', 'トング',
    'ピーラー', 'おろし金', 'すり鉢', 'すりこぎ', 'ミキサー', 'ジューサー', 'コーヒーメーカー', 'ポット', '魔法瓶', 'トースター',
    'ホットプレート', 'たこ焼き器', 'ワッフルメーカー', 'ホームベーカリー', 'アイロン', 'アイロン台', 'ミシン', '針', '糸', 'ボタン',
    'ファスナー', '安全ピン', 'クリップ', 'ホッチキス', 'ホッチキスの芯', 'セロハンテープ', 'ガムテープ', '両面テープ', 'マスキングテープ', '輪ゴム',
    'ひも', 'ロープ', 'チェーン', '南京錠', '鍵', 'ドライバー', 'レンチ', 'ペンチ', 'ニッパー', 'のこぎり',
    'カッター', 'メジャー', '水準器', 'ドリル', 'ネジ', 'ボルト', 'ナット', 'ワッシャー', '接着剤', 'ペンキ',
    'はけ', 'ローラー', 'サンドペーパー', 'パテ', 'シーリング材', 'ブルーシート', 'ダンボール', '新聞紙', 'コピー用紙', 'メモ帳',
    '付箋', 'ファイル', 'バインダー', 'クリアファイル', '封筒', '便箋', 'はがき', '切手', '印鑑', '朱肉',
    'スタンプ', 'インク', '稲妻', '雲', '太陽', '月', '星', '雪', '風', '虹',
    '晴れ', '曇り', '雨', '台風', '雷', '霧', 'あられ', 'みぞれ', '吹雪', '快晴'
  ],

  vehicle: [
    '軽自動車', '普通自動車', '高級車', 'スポーツカー', 'ワゴン車', 'ミニバン', 'SUV', 'トラック', 'バス', 'タクシー',
    'パトカー', '救急車', '消防車', 'ショベルカー', 'ブルドーザー', 'クレーン車', '新幹線', '特急電車', '普通電車', '地下鉄',
    '路面電車', 'モノレール', '蒸気機関車', '旅客機', '戦闘機', 'ヘリコプター', '気球', 'ロケット', '宇宙船', '客船',
    'タンカー', '漁船', 'ヨット', 'カヌー', '水上バイク', '潜水艦', 'フェリー', '原付バイク', 'オートバイ', '電動自転車',
    '三輪車', '一輪車', 'スケートボード', 'キックボード', 'セグウェイ', '車椅子', 'ベビーカー', 'リヤカー', '馬車',
    'ダンプカー', 'ミキサー車', 'ゴミ収集車', 'タンクローリー', 'レッカー車', 'フォークリフト', 'トレーラー', 'コンテナ車', 'キャンピングカー', 'リムジン',
    'オープンカー', 'クーペ', 'セダン', 'ハッチバック', 'ピックアップトラック', 'バギー', 'ゴーカート', 'F1カー', 'ラリーカー', 'ドリフトカー',
    'スクーター', 'ビッグバイク', 'オフロードバイク', 'トライク', 'サイドカー', 'ローラースケート', 'インラインスケート', 'スクートバイク', 'ホバーボード', 'トロリーバス',
    '2階建てバス', '連節バス', 'スクールバス', '観光バス', 'リニアモーターカー', 'ケーブルカー', 'トロッコ', '貨物列車', '寝台列車', '観光列車',
    'ディーゼル車', '輸送機', 'グライダー', '飛行船', 'ドローン', '水上飛行機', 'ジェット機', 'プロペラ機', 'オスプレイ', 'ジャイロコプター',
    '宇宙ステーション', '自動車', '自転車', 'バイク', '電車', '飛行機', '船', 'ロープウェイ', '人力車'
  ],

  animal: [
    'ライオン', 'うさぎ', '象', '蟻', '鷹', '亀', 'チーター', 'ナマケモノ', '犬', '猫',
    '馬', '牛', '豚', '羊', '山羊', '鶏', 'アヒル', '七面鳥', 'ハムスター', 'モルモット',
    'リス', 'ネズミ', 'コウモリ', 'キツネ', 'タヌキ', 'イタチ', 'アライグマ', 'カワウソ', 'ビーバー', 'ハリネズミ',
    'モグラ', '熊', 'パンダ', 'コアラ', 'カンガルー', 'ワラビー', 'オポッサム', '虎', 'ヒョウ', 'ジャガー',
    'ピューマ', '猿', 'ゴリラ', 'チンパンジー', 'オランウータン', 'テナガザル', 'キツネザル', 'メガネザル', 'マンドリル', 'ニホンザル',
    'キリン', 'シマウマ', 'カバ', 'サイ', 'ラクダ', 'アルパカ', 'リャマ', '鹿', 'トナカイ', 'ヘラジカ',
    'カモシカ', 'バイソン', 'ヤク', 'イノシシ', 'イボイノシシ', 'アルマジロ', 'アリクイ', 'センザンコウ', 'カピバラ', 'ヤマアラシ',
    'スカンク', 'アナグマ', 'ラッコ', 'オットセイ', 'アシカ', 'アザラシ', 'セイウチ', 'イルカ', 'クジラ', 'シャチ',
    'ジュゴン', 'マナティー', 'ペンギン', '白鳥', '鶴', 'フラミンゴ', 'ペリカン', 'カモメ', 'アホウドリ', 'ワシ',
    'トビ', 'フクロウ', 'ミミズク', 'オウム', 'インコ', 'カナリア', '文鳥', 'スズメ', 'ツバメ', 'カラス',
    'ハト', 'キジ', 'クジャク', 'ダチョウ', 'エミュー', 'キーウィ', 'カッコウ', 'キツツキ', 'カワセミ', 'ウグイス',
    'メジロ', 'ヒバリ', 'トンボ', 'バッタ', 'コオロギ', 'カマキリ', 'セミ', 'チョウ', '蛾', 'ハチ',
    'アブ', 'ハエ', '蚊', 'カブトムシ', 'クワガタ', 'テントウムシ', 'ホタル', 'クモ', 'サソリ', 'ムカデ',
    'ヤスデ', 'ミミズ', 'カタツムリ', 'ナメクジ', 'タコ', 'イカ', 'エビ', 'カニ', 'ヤドカリ', 'ザリガニ',
    'クラゲ', 'ヒトデ', 'ウニ', 'ナマコ', 'サンゴ', 'イソギンチャク', 'サメ', 'エイ', 'マグロ', 'カツオ',
    'サバ', 'アジ', 'イワシ', 'サンマ', 'タイ', 'ヒラメ', 'カレイ', 'フグ', 'アンコウ', 'ウナギ',
    'アナゴ', 'ハモ', 'ドジョウ', 'ナマズ', 'コイ', 'フナ', '金魚', 'メダカ', 'グッピー', 'ピラニア',
    'カエル', 'ヒキガエル', 'アマガエル', 'オタマジャクシ', 'サンショウウオ', 'イモリ', 'ヤモリ', 'トカゲ', 'イグアナ', 'カメレオン',
    'ヘビ', 'コブラ', 'マムシ', 'ニシキヘビ', 'アナコンダ', 'ワニ', 'アリゲーター',
  ],

  entertainment: [
    '映画', 'アニメ', 'ドラマ', '音楽', 'ゲーム', '漫画', '小説', 'YouTube', 'TikTok', 'Instagram',
    'Twitter', 'ポッドキャスト', 'ラジオ', 'テレビ番組', 'お笑い', 'ミュージカル', '演劇', 'コンサート', 'フェス', 'カラオケ',
    'Netflix', 'Disney+', 'Amazon Prime', 'Hulu', 'Spotify', 'Apple Music', 'PlayStation', 'Nintendo Switch', 'Xbox', 'Steam',
    'VR', 'AR', 'eスポーツ', 'ボードゲーム', 'カードゲーム', 'パズル', 'クイズ', 'なぞなぞ', 'ダンス', 'DJ',
    'ライブ配信', 'Vtuber', 'アイドル', '声優', 'コスプレ', '同人誌', 'コミケ', 'オタク', 'サーカス', '手品',
    '落語', '漫才', 'コント', '歌舞伎', '能', '狂言', '宝塚', 'オペラ', 'バレエ', 'ジャズ',
    'ロック', 'ポップス', 'クラシック', 'ヒップホップ', 'EDM', 'K-POP', 'J-POP', '演歌', 'フォークダンス', 'レゲエ',
    'ブルース', 'カントリー', 'ソウル', 'R&B', 'メタル', 'パンク', 'テクノ', 'アンビエント', 'ワールドミュージック', 'サウンドトラック',
    'ピアノ', 'ギター', 'ドラム', 'ベース', 'バイオリン', 'サックス', 'トランペット', 'フルート', 'ハーモニカ', 'ウクレレ',
    '三味線', '琴', '尺八', '太鼓', 'レコード', 'CD', 'カセットテープ', 'MD', 'ラジカセ', 'ウォークマン',

  ],

  sport: [
    'サッカー', '野球', 'バスケットボール', 'テニス', 'ゴルフ', '水泳', '陸上', '体操', '柔道', '剣道',
    '空手', 'ボクシング', 'バドミントン', '卓球', 'バレーボール', 'ラグビー', 'スキー', 'スノーボード', 'スケート', 'サーフィン',
    'アメフト', 'ホッケー', 'アイスホッケー', 'ハンドボール', 'ソフトボール', 'クリケット', 'ボウリング', 'ビリヤード', 'ダーツ', 'アーチェリー',
    '射撃', 'フェンシング', 'レスリング', '相撲', '合気道', 'テコンドー', 'キックボクシング', '総合格闘技', 'プロレス', 'ウエイトリフティング',
    'パワーリフティング', 'ボディビル', 'クロスフィット', 'ヨガ', 'ピラティス', 'エアロビクス', 'ズンバ', 'マラソン', '駅伝', 'トライアスロン',
    '競歩', 'ハードル', '走り幅跳び', '走り高跳び', '棒高跳び', '砲丸投げ', 'やり投げ', '円盤投げ', 'ハンマー投げ', '十種競技',
    '七種競技', '新体操', 'トランポリン', '鉄棒', 'あん馬', '平行棒', 'つり輪', '跳馬', '平均台', 'シンクロナイズドスイミング',
    '飛込み', '水球', 'フィンスイミング', 'カヌー', 'カヤック', 'ボート', 'ヨット', 'ウィンドサーフィン', 'カイトサーフィン', 'ウェイクボード',
    '水上スキー', 'スキューバダイビング', 'シュノーケリング', 'フリーダイビング', 'クロスカントリースキー', 'スキージャンプ', 'バイアスロン', 'フィギュアスケート', 'スピードスケート', 'ショートトラック',
    'カーリング', 'ボブスレー', 'リュージュ', 'スケルトン', 'ロッククライミング', 'ボルダリング', '登山', 'トレッキング', 'サイクリング', 'BMX'
  ],

  place: [
    '城', '小屋', '高層ビル', 'テント', '橋', 'トンネル', '山', '谷', '海', '川',
    '湖', '砂漠', '森', '草原', '洞窟', '火山', '氷山', '地球', '宇宙',
    '東京', '大阪', '名古屋', '横浜', '京都', '神戸', '札幌', '福岡', '仙台', '広島',
    '川崎', 'さいたま', '千葉', '北九州', '堺', '新潟', '浜松', '熊本', '相模原', '岡山',
    '静岡', '船橋', '鹿児島', '八王子', '宇都宮', '松山', '金沢', '長崎', '那覇', '富山',
    'アメリカ', '中国', '韓国', 'インド', 'ロシア', 'イギリス', 'フランス', 'ドイツ', 'イタリア', 'スペイン',
    'カナダ', 'オーストラリア', 'ブラジル', 'メキシコ', 'アルゼンチン', 'インドネシア', 'タイ', 'ベトナム', 'フィリピン', 'シンガポール',
    'マレーシア', 'トルコ', 'エジプト', '南アフリカ', 'ナイジェリア', 'ケニア', 'エチオピア', 'モロッコ', 'サウジアラビア', 'イラン',
    'イスラエル', 'UAE', 'オランダ', 'ベルギー', 'スイス', 'オーストリア', 'スウェーデン', 'ノルウェー', 'デンマーク', 'フィンランド',
    'ポーランド', 'チェコ', 'ハンガリー', 'ギリシャ', 'ポルトガル', 'アイルランド', 'ニュージーランド', 'チリ', 'ペルー', 'コロンビア',
    'ベネズエラ', 'キューバ', 'ジャマイカ', 'パキスタン', 'バングラデシュ', 'スリランカ', 'ネパール', 'ミャンマー', 'カンボジア', 'ラオス',
    'モンゴル', '台湾', '香港', 'マカオ', 'ウクライナ', 'ルーマニア', 'ブルガリア', 'クロアチア', 'セルビア', 'スロバキア', 'スロベニア',
    // 有名な建造物・ランドマーク
    '東京タワー', '東京スカイツリー', '富士山', '清水寺', '金閣寺', '伏見稲荷大社', '厳島神社', '姫路城', '大阪城', '名古屋城',
    '浅草寺', '東大寺', '日光東照宮', '出雲大社', '伊勢神宮', '平等院', '法隆寺', '原爆ドーム', '首里城', '札幌時計台',
    'エッフェル塔', '凱旋門', 'ルーブル美術館', 'ノートルダム大聖堂', 'ベルサイユ宮殿', 'ビッグベン', 'タワーブリッジ', 'バッキンガム宮殿', 'ウェストミンスター寺院', 'ストーンヘンジ',
    '自由の女神', 'エンパイアステートビル', 'ゴールデンゲートブリッジ', 'ホワイトハウス', 'グランドキャニオン', 'ナイアガラの滝', 'ラシュモア山', 'ハリウッドサイン', 'タイムズスクエア', 'セントラルパーク',
    '万里の長城', '紫禁城', '天安門', '兵馬俑', 'タージマハル', 'アンコールワット', 'ボロブドゥール', 'ペトロナスツインタワー', 'マリーナベイサンズ', 'ブルジュハリファ',
    'ピラミッド', 'スフィンクス', 'コロッセオ', 'ピサの斜塔', 'サグラダファミリア', 'アルハンブラ宮殿', 'パルテノン神殿', 'アクロポリス', 'モンサンミッシェル', 'ノイシュバンシュタイン城',
    'オペラハウス', 'ハーバーブリッジ', 'エアーズロック', 'マチュピチュ', 'イースター島のモアイ', 'クライストチャーチ大聖堂', 'チチェンイッツァ', 'テオティワカン', 'リオのキリスト像'
  ]
};

// カード配列を生成する関数
function generateCardsFromNames(): Card[] {
  const cards: Card[] = [];

  // カテゴリごとに処理
  for (const [category, names] of Object.entries(cardData)) {
    const categoryCode = category.charAt(0);
    names.forEach((name, index) => {
      cards.push({
        id: `${categoryCode}${String(index + 1).padStart(3, '0')}`,
        name: name,
        category: category as Card['category']
      });
    });
  }

  return cards;
}

// カードプール
export const cardPool: Card[] = generateCardsFromNames();

// テーマに応じてカードをフィルタリング
export function filterCardsByTheme(categories: string[]): Card[] {
  if (!categories || categories.length === 0) {
    return cardPool;
  }
  return cardPool.filter(card => categories.includes(card.category));
}

// シードベースでカードを生成する関数（重複なし配布、テーマ対応）
export function generateCardsForPlayer(
  roomId: string,
  round: number,
  playerId: number,
  count: number = 5,
  themeCategories?: string[]
): Card[] {
  const seedString = `${roomId}-round${round}`;
  const rng = seedrandom(seedString);

  const availableCards = themeCategories
    ? filterCardsByTheme(themeCategories)
    : [...cardPool];

  const shuffled = [...availableCards];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(rng() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }

  const startIndex = (playerId - 1) * count;
  const endIndex = startIndex + count;

  if (endIndex > shuffled.length) {
    const firstPart = shuffled.slice(startIndex);
    const secondPart = shuffled.slice(0, count - firstPart.length);
    return [...firstPart, ...secondPart];
  }

  return shuffled.slice(startIndex, endIndex);
}

// カードのカテゴリーごとの色
export const categoryColors = {
  food: '#FFA500',
  item: '#4169E1',
  place: '#32CD32',
  animal: '#FF6B6B',
  plant: '#228B22',
  entertainment: '#9370DB',
  sport: '#FF69B4',
  weather: '#87CEEB',
  vehicle: '#FFD700',
};

// カテゴリーの表示名マッピング
export const categoryDisplayNames = {
  food: '食べ物',
  item: 'アイテム',
  place: '場所',
  animal: '動物',
  plant: '植物',
  entertainment: 'エンタメ',
  sport: 'スポーツ',
  weather: '天候',
  vehicle: '乗り物',
};